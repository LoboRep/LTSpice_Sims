import{_ as b}from"./preload-helper-87151e19.mjs";import{_ as I}from"./IconElement-b96dcc23.mjs";import{f as w}from"./useDateUtils-cea83ec1.mjs";import{a as A,u as L}from"./usePrimaryImageDimensions-8b417fdf.mjs";import{u as D}from"./useWindowDimensions-9d7c55cb.mjs";import{_ as P,l as r,m as l,p as c,E as k,B as C,x as f,F as T,D as F,A as d,au as x,G as _,z as S,J as v}from"./_plugin-vue_export-helper-15c97ded.mjs";import"./client-only-91773298.mjs";import"./index-a84c5b70.mjs";import"./app.config-2d714cad.mjs";import"./index-e5521a99.mjs";import"./state-171775be.mjs";import"./cookie-ba326bc4.mjs";const z=v(()=>b(()=>import("./WebImgLazyLoader-0428e791.mjs"),["./WebImgLazyLoader-0428e791.mjs","./_plugin-vue_export-helper-15c97ded.mjs"],import.meta.url).then(t=>t.default||t)),B=v(()=>b(()=>import("./WebImage-52068ebe.mjs"),["./WebImage-52068ebe.mjs","./preload-helper-87151e19.mjs","./WebImageCredit-1761e932.mjs","./IconElement-b96dcc23.mjs","./client-only-91773298.mjs","./_plugin-vue_export-helper-15c97ded.mjs","./IconElement.74f2b182.css","./WebImageCredit.dcea4e47.css","./WebImage.c29e97d1.css"],import.meta.url).then(t=>t.default||t)),E={props:{imagePosition:{type:String,default:"none"},imageShaping:{type:String,default:"crop"},item:{type:Object,required:!0},showSummary:{type:Boolean,default:!0},hidePrimarySection:{type:Boolean},hidePublishedDate:{type:Boolean,default:!1},showDate:{type:Boolean,default:!0},displayFullHeadline:{type:Boolean,default:!1},titleFontSize:{type:Number,default:16},itemMask:{type:Boolean,default:!1},pageCompanyName:{type:String},percentOfContentArea:{type:Number},lazyLoadImage:{type:Boolean,default:!0},titleColor:{type:String,default:"#000000"}},data(){return{lockType:null,bibblioTracked:!1}},computed:{useApStylePubDate(){return w},hasPrimarySection(){var t;return!!((t=this.item.primarySection)!=null&&t.alias)},nameAndAlias(){var t,a,e,n,o,i,h,u,y,m;if(this.showCompanyDate){const g=this.$ss.contentStyle.showCompanyDate;if(g==="company_author"||this.$ss.contentStyle.showCompanyDate===!0){const s=((t=this.item.company)==null?void 0:t.name)??((a=this.firstAuthor)==null?void 0:a.name),p=s===((e=this.item.company)==null?void 0:e.name)?this.companyLink:(n=this.firstAuthor)==null?void 0:n.path;return{name:s,alias:p}}if(g==="author_company"){const s=((o=this.firstAuthor)==null?void 0:o.name)??((i=this.item.company)==null?void 0:i.name),p=s===((h=this.item.company)==null?void 0:h.name)?this.companyLink:(u=this.firstAuthor)==null?void 0:u.path;return{name:s,alias:p}}if(g==="author_only"){const s=(y=this.firstAuthor)==null?void 0:y.name,p=(m=this.firstAuthor)==null?void 0:m.path;return{name:s,alias:p}}}return{}},imageAlt(){var t,a,e,n,o;return((a=(t=this==null?void 0:this.item)==null?void 0:t.primaryImage)==null?void 0:a.displayName)??((n=(e=this==null?void 0:this.item)==null?void 0:e.primaryImage)==null?void 0:n.alt)??((o=this.item)!=null&&o.nativeImagePath?this.item.nativeTitle:"")},imageDimensions(){return A(this.imagePosition,this.percentOfContentArea,1.8,this.$ss.contentStyle.smallImageWidth,this.$ss.contentStyle.smallImageHeight)},imageUrl(){var m;if(this.item.nativeImagePath)return this.item.nativeImagePath;const{src:t,isLogo:a}=((m=this.item)==null?void 0:m.primaryImage)??{};if(!t)return"";const e=`${t.split("?")[0]}?auto=format,compress`,n=`&fit=${a?"fill&pad=5":this.imageShaping}`,o=this.imageShaping==="fill"||a?"&fill-color=white":"",i=L(this.imagePosition,null,this.percentOfContentArea,this.$ss.contentStyle.smallImageWidth,this.$ss.contentStyle.smallImageHeight),h=`&h=${Math.round(i.height)}`,u=`&w=${Math.round(i.width)}`;return`${e}${n}${o}${h}${u}&q=45`},primarySectionAlias(){var a,e,n,o;const t=(e=(a=this.item)==null?void 0:a.primarySection)==null?void 0:e.alias;return(!t.startsWith("http")&&!t.startsWith("/")?"/":"")+((o=(n=this.item)==null?void 0:n.primarySection)==null?void 0:o.alias)},firstAuthor(){var t,a,e;return(e=(a=(t=this.item)==null?void 0:t.authors)==null?void 0:a.edges[0])==null?void 0:e.node},firstContributor(){var t,a,e;return(e=(a=(t=this.item)==null?void 0:t.contributors)==null?void 0:a.edges[0])==null?void 0:e.node},title(){return this.item.nativeTitle??this.item.shortName??this.item.name},summary(){return this.item.nativeSummary??this.item.teaser},itemUrl(){var t,a,e,n;return((t=this.item)==null?void 0:t.nativeUrl)??((e=(a=this.item)==null?void 0:a.siteContext)==null?void 0:e.path)??((n=this.item)==null?void 0:n.alias)??`/${this.item.objectID}`??""},companyLink(){return this.item.company?`/${this.item.company.id}`:""},showCompanyDate(){var t;return((t=this.item.company)==null?void 0:t.name)!==this.pageCompanyName},getImagePosition(){return this.imagePosition||"none"}},async mounted(){var a,e,n,o,i,h;const t=(a=this.$ss.loginRegistration)==null?void 0:a.showTitleLocks;if(t){const u=((e=await this.$idx.getContext())==null?void 0:e.mergedAccessLevels)??[],y=((o=(n=this.item)==null?void 0:n.userRegistration)==null?void 0:o.accessLevels)??[];let m=((h=(i=this.item)==null?void 0:i.userRegistration)==null?void 0:h.isRequired)&&!this.$idx.isLoggedIn();y.length&&(y.forEach(g=>{u.find(s=>s.id===g)&&(m=!1)}),this.lockType=t?m?"lock":"unlock":null)}this.item.type==="external_bibblio"&&(window.addEventListener("scroll",this.handleScroll),this.handleScroll())},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.bibblioTracked||this.$refs.item.getBoundingClientRect().top-D().value.headerHeight<=300&&(this.trackBibblioEvent("Viewed"),this.bibblioTracked=!0)},trackBibblioEvent(t){var a;if(this.item.type==="external_bibblio"){const e={type:t,sourceHref:`${window.location.protocol}//${window.location.host}${this.$route.fullPath}`,trackingInfo:(a=this.item)==null?void 0:a.trackingInfo};this.$gql.mutate("setBibblioEvent",e)}}}},H={key:0,class:"mask"},U={key:2,class:"image-wrapper"},W={class:S(["text-box"])},N={key:0},M={key:0},O=["href","target"],q=["href","target","rel"],R=["innerHTML"],V={key:0,class:"name"},j=["href"],G={key:1,class:"date"},J=["innerHTML"];function K(t,a,e,n,o,i){var m,g;const h=z,u=B,y=I;return r(),l("div",{ref:"item",class:S(["ebm-content-item",i.getImagePosition!=="none"&&i.imageUrl?"image-"+i.getImagePosition:"","section-"+t.$ss.contentStyle.sectionLocation]),style:d({display:i.getImagePosition==="above"||i.getImagePosition==="behind"?"block":"flex",flexDirection:i.getImagePosition==="right"?"row-reverse":"row"})},[e.itemMask?(r(),l("div",H)):c("",!0),e.item.nativeImpressionTrackerUrl?(r(),k(h,{key:1,href:e.item.nativeImpressionTrackerUrl},null,8,["href"])):c("",!0),i.getImagePosition!=="none"&&i.imageUrl?(r(),l("div",U,[C(u,{width:i.imageDimensions.width,height:i.imageDimensions.height,image:i.imageUrl,"is-logo":e.item.primaryImage?e.item.primaryImage.isLogo:!1,"image-shaping":e.imageShaping,alt:i.imageAlt,credit:e.item.primaryImage?e.item.primaryImage.credit:"","credit-position":"top","content-type":e.item.contentType||e.item.type,"image-link":i.itemUrl,"lazy-load":e.lazyLoadImage},null,8,["width","height","image","is-logo","image-shaping","alt","credit","content-type","image-link","lazy-load"])])):c("",!0),f("div",W,[(r(!0),l(T,null,F(e.item.labels,s=>(r(),l("div",{key:s,class:"sponsored",style:d({color:t.$ss.contentStyle.sponsoredTextColor,fontFamily:t.$ss.primaryFontFamily})},[s==="Sponsored"||s==="Members Only"||s==="Supported"||s==="Opinion"?(r(),l("span",N,[x(_(s)+" ",1),s!=="Opinion"?(r(),l("span",M,"Content")):c("",!0)])):c("",!0)],4))),128)),f("div",{style:d({display:"flex",flexDirection:t.$ss.contentStyle.sectionLocation==="top"?"column":"column-reverse"})},[i.hasPrimarySection&&!e.hidePrimarySection&&t.$ss.contentStyle.sectionLocation!=="none"?(r(),l("a",{key:0,class:"section-name",href:i.primarySectionAlias,target:i.primarySectionAlias.startsWith("http")?"_blank":"_self",style:d({fontFamily:t.$ss.primaryFontFamily,color:t.$ss.contentStyle.sectionColor})},_(e.item.primarySection.name),13,O)):c("",!0),f("div",null,[f("a",{href:i.itemUrl,target:i.itemUrl.startsWith(`https://www.${t.$ss.general.rootDomain}`)||i.itemUrl.startsWith("/")?"_self":"_blank",class:"title-wrapper",rel:(g=(m=e.item)==null?void 0:m.labels)!=null&&g.includes("Sponsored")?"sponsored":null,style:d({color:e.titleColor}),onClick:a[0]||(a[0]=()=>{i.trackBibblioEvent("Clicked")})},[f("h3",{class:S(["title-text",[e.displayFullHeadline?"":"clamp-headline"]]),style:d([e.displayFullHeadline?{fontSize:e.titleFontSize+"px",lineHeight:e.titleFontSize*1.3+"px"}:{fontSize:e.titleFontSize+"px",maxHeight:e.titleFontSize*3+16+"px"}])},[o.lockType?(r(),k(y,{key:0,icon:`noto:${o.lockType}ed`,class:"lock","icon-color":"gold",width:18},null,8,["icon"])):c("",!0),f("div",{innerHTML:i.title},null,8,R)],6)],12,q),f("div",{style:d({display:"flex",flexDirection:t.$ss.contentStyle.dateLocation==="above_summary"?"column":"column-reverse"})},[i.useApStylePubDate(e.item)&&e.showDate&&t.$ss.contentStyle.dateLocation!=="none"?(r(),l("div",{key:0,class:"name-and-date",style:d({color:t.$ss.contentStyle.dateTextColor,fontFamily:t.$ss.primaryFontFamily})},[i.nameAndAlias.name?(r(),l("div",V,[f("a",{href:i.nameAndAlias.alias,style:d({color:t.$ss.baseStyles.linkColor})},_(i.nameAndAlias.name),13,j)])):c("",!0),i.useApStylePubDate(e.item)&&!e.hidePublishedDate?(r(),l("div",G,_(i.useApStylePubDate(e.item)),1)):c("",!0)],4)):c("",!0),e.showSummary?(r(),l("div",{key:1,class:"teaser-text",innerHTML:i.summary??""},null,8,J)):c("",!0)],4)])],4)])],6)}const re=P(E,[["render",K],["__scopeId","data-v-16707d77"]]);export{re as default};
